<template>
  <div class="main">
    <h2>
      <img src="https://1409hospital.ru/assets/images/mbr-4.png" alt="" />
      –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –∞–Ω–∫–µ—Ç—É
      <img src="https://1409hospital.ru/assets/images/mbr-4.png" alt="" />
    </h2>
    <h4>
      –ü–æ–ª—è –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ <span>*</span> —è–≤–ª—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
    </h4>
    <form @submit.prevent="submitForm">
      <div class="block">
        <h3>–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
        <div class="inputDiv">
          <label for="surname">–§–∞–º–∏–ª–∏—è<span>*</span></label>
          <input
            type="text"
            id="surname"
            v-model="state.surname"
            placeholder="–ò–≤–∞–Ω–æ–≤"
          />
          <p v-if="v$.surname.$error">–§–∞–º–∏–ª–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</p>
        </div>
        <div class="inputDiv">
          <label for="name">–ò–º—è<span>*</span></label>
          <input
            type="text"
            id="name"
            v-model="state.name"
            placeholder="–ò–≤–∞–Ω"
          />
          <p v-if="v$.name.$error">–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</p>
        </div>
        <div class="inputDiv">
          <label for="patronymic">–û—Ç—á–µ—Å—Ç–≤–æ</label>
          <input
            type="text"
            id="patronymic"
            v-model="state.patronymic"
            placeholder="–ò–≤–∞–Ω–æ–≤–∏—á"
          />
        </div>
        <div class="inputDiv">
          <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è<span>*</span></label>
          <input type="date" id="birthDate" v-model="state.birthDate" />
          <p v-if="v$.birthDate.$error">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</p>
        </div>
        <div class="inputDiv">
          <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞<span>*</span></label>
          <input
            type="tel"
            v-model="state.phone"
            id="phone"
            maxlength="11"
            pattern="^7\d{10}$"
            title="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å 7 –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å 11 —Ü–∏—Ñ—Ä"
            placeholder="79377567700"
          />
          <p v-if="v$.phone.$error">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω</p>
        </div>
        <div class="inputDiv">
          <label for="gender">–ü–æ–ª</label>
          <select id="gender" v-model="state.gender">
            <option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª</option>
            <option value="male">–ú—É–∂—Å–∫–æ–π</option>
            <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
          </select>
        </div>
        <div class="inputDiv clientGroup">
          <label for="clientGroup">–ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤<span>*</span></label>
          <select id="clientGroup" v-model="state.clientGroup" multiple>
            <option value="VIP">VIP</option>
            <option value="Problematic">–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ</option>
            <option value="OMS">–û–ú–°</option>
          </select>
          <p v-if="v$.clientGroup.$error">–ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</p>
        </div>
        <div class="inputDiv">
          <label for="doctor">–õ–µ—á–∞—â–∏–π –≤—Ä–∞—á</label>
          <select id="doctor" v-model="state.doctor">
            <option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–∞—á–∞</option>
            <option value="Ivanov">–ò–≤–∞–Ω–æ–≤</option>
            <option value="Zakharov">–ó–∞—Ö–∞—Ä–æ–≤</option>
            <option value="Chernysheva">–ß–µ—Ä–Ω—ã—à–µ–≤–∞</option>
          </select>
        </div>
        <div class="inputDiv sms">
          <label for="noSMS">–ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –°–ú–°</label>
          <input id="noSMS" v-model="state.noSMS" type="checkbox" />
        </div>
      </div>
      <div class="block">
        <h3>–ê–¥—Ä–µ—Å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è:</h3>
        <div class="inputDiv">
          <label for="index">–ò–Ω–¥–µ–∫—Å</label>
          <input
            type="number"
            id="index"
            v-model="state.index"
            placeholder="–ò–Ω–¥–µ–∫—Å"
          />
        </div>
        <div class="inputDiv">
          <label for="country">–°—Ç—Ä–∞–Ω–∞</label>
          <input id="country" v-model="state.country" placeholder="–°—Ç—Ä–∞–Ω–∞" />
        </div>
        <div class="inputDiv">
          <label for="region">–û–±–ª–∞—Å—Ç—å</label>
          <input id="region" v-model="state.region" placeholder="–û–±–ª–∞—Å—Ç—å" />
        </div>
        <div class="inputDiv">
          <label for="city">–ì–æ—Ä–æ–¥<span>*</span></label>
          <input id="city" v-model="state.city" placeholder="–ì–æ—Ä–æ–¥" />
          <p v-if="v$.city.$error">–£–∫–∞–∑—ã–≤–∞—Ç—å –≥–æ—Ä–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</p>
        </div>
        <div class="inputDiv">
          <label for="street">–£–ª–∏—Ü–∞</label>
          <input id="street" v-model="state.street" placeholder="–£–ª–∏—Ü–∞" />
        </div>
        <div class="inputDiv">
          <label for="house">–î–æ–º</label>
          <input id="house" v-model="state.house" placeholder="–î–æ–º" />
        </div>
        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å üë®üèª‚Äç‚öïÔ∏è</button>
      </div>
      <div class="block">
        <h3>–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π –ª–∏—á–Ω–æ—Å—Ç—å:</h3>
        <div class="inputDiv">
          <label for="docType">–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞<span>*</span></label>
          <select id="docType" v-model="state.docType">
            <option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞</option>
            <option value="Passport">–ü–∞—Å–ø–æ—Ä—Ç</option>
            <option value="BirthCertificate">–°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏</option>
            <option value="WaterCertificate">–í–æ–¥. —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ</option>
          </select>
          <p v-if="v$.docType.$error">–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω</p>
        </div>
        <div class="inputDiv">
          <label for="docSeries">–°–µ—Ä–∏—è</label>
          <input
            type="number"
            id="docSeries"
            v-model="state.docSeries"
            placeholder="–°–µ—Ä–∏—è"
          />
        </div>
        <div class="inputDiv">
          <label for="docNumber">–ù–æ–º–µ—Ä</label>
          <input
            type="number"
            id="docNumber"
            v-model="state.docNumber"
            placeholder="–ù–æ–º–µ—Ä"
          />
        </div>
        <div class="inputDiv">
          <label for="docIssuedBy">–ö–µ–º –≤—ã–¥–∞–Ω</label>
          <input
            id="docIssuedBy"
            v-model="state.docIssuedBy"
            placeholder="–ö–µ–º –≤—ã–¥–∞–Ω"
          />
          <label for="docIssueDate">–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏<span>*</span></label>
          <input id="docIssueDate" v-model="state.docIssueDate" type="date" />
          <p v-if="v$.docIssueDate.$error">–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</p>
        </div>
      </div>
      <div class="btnDiv notes">
        <h5 v-if="state.surname || state.name">
          {{ state.surname }} {{ state.name }}
        </h5>
        <h5 v-if="state.birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è {{ state.birthDate }}</h5>
        <h5 v-if="state.phone">—Ç. {{ state.phone }}</h5>
        <h5 v-if="state.city">–ò–∑ –≥–æ—Ä–æ–¥–∞ {{ state.city }}</h5>
        <h2 v-if="state.sent">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</h2>
      </div>
    </form>
  </div>
</template>

<script>
import { reactive, computed } from 'vue';
import { useVuelidate } from '@vuelidate/core';
import { required, helpers } from '@vuelidate/validators';

// const { minLength, maxLength, pattern } = helpers;

export default {
  setup() {
    const state = reactive({
      surname: '',
      name: '',
      patronymic: '',
      birthDate: '',
      phone: '',
      gender: '',
      clientGroup: [],
      doctor: '',
      noSMS: false,
      index: '',
      country: '',
      region: '',
      city: '',
      street: '',
      house: '',
      docType: '',
      docSeries: '',
      docNumber: '',
      docIssuedBy: '',
      docIssueDate: '',
      sent: false,
    });

    const rules = computed(() => ({
      surname: { required },
      name: { required },
      birthDate: { required },
      phone: { required, pattern: /^7\d{10}$/ },
      clientGroup: { required },
      city: { required },
      docType: { required },
      docIssueDate: { required },
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    }));

    const v$ = useVuelidate(rules, state);

    function submitForm() {
      v$.value.$touch();
      if (v$.value.$invalid) {
        return;
      }
      this.state.sent = true;
      console.log(this.state);
    }

    return { state, v$, submitForm };
  },
};
</script>

<style lang="sass" scoped>
// –®—Ä–∏—Ñ—Ç—ã
@import url('https://fonts.googleapis.com/css2?family=Bad+Script&display=swap')

// –ú–∏–∫—Å–∏–Ω—ã
@mixin respond($breakpoint)
    @if $breakpoint == phone
        @media only screen and (max-width: 700px)
            @content

    @if $breakpoint == tab-port
        @media only screen and (max-width: 900px)
            @content

    @if $breakpoint == tab-land
        @media only screen and (max-width: 1070px)
            @content

    @if $breakpoint == tab-pc
        @media only screen and (max-width: 1220px)
            @content

    @if $breakpoint == big-screen
        @media only screen and (min-width: 1800px)
            @content

.main
  margin: 5rem 0
  background: rgba(255, 255, 255, 0.2)
  border-radius: 1.5rem
  box-shadow: 4rem 4rem 30rem rgba(0, 0, 0, .5)
  backdrop-filter: blur(5px)
  -webkit-backdrop-filter: blur(5px)
  border: 1px solid rgba(255, 255, 255, 0.3)
  width: 75rem
  font-size: 1.5rem
  padding: 2rem 3rem 8rem 3rem
  form
    display: flex
    flex-wrap: wrap
    justify-content: space-around
    @include respond(phone)
      flex-wrap: nowrap
      flex-direction: column
      align-items: center
  h2
    padding-bottom: 1.8rem
    text-align: center
    font-size: 3rem
    border-bottom: 1px solid rgba(255, 255, 255, 0.3)
    img
      transform: translateY(.5rem)
      width: 3rem

  h3
    padding-bottom: .5rem
  h4
    padding: 1rem 3.5rem
    font-size: 1.6rem
    border-bottom: 1px solid rgba(255, 255, 255, 0.3)
    text-decoration: underline
  span
    color: Crimson
  button
    transform: translate(7rem, 4rem)
    width: 15rem
    height: 4rem
    border: none
    background-color: SteelBlue
    font-size: 2rem
    color: white
    border-radius: 1rem
    cursor: pointer
    &:hover
      transform: translate(7rem, 3.3rem)
      box-shadow: 1rem .7rem .1rem black
      transition: .3s
    &:not(nover)
      transition: .3s
    &:active
      transform: translate(7rem, 3.7rem)
      transition: .1s

.block
 display: flex
 flex-direction: column
 padding: 2rem 0 0 0

.inputDiv
  display: flex
  flex-direction: column
  margin-bottom: 1rem
  label
    font-size: 1.6rem
    padding-bottom: .1rem
  input
    width: 30rem
    height: 2rem
    font-size: 1.5rem
  select
    width: 100%
    height: 2rem
    font-size: 1.5rem
  p
    color: DarkBlue
    background-color: #8EC5FC
    background-image: linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%)
    border-radius: 0 0 1rem 1rem
    text-align: center

.clientGroup
  select
    width: 100%
    height: 6rem
    text-align: center
    font-size: 1.5rem
    padding-top: .3rem

.sms
  display: flex
  flex-direction: column
  input
    width: 1.7rem
    margin: .3rem 0 1rem 0


.btnDiv
  display: flex
  justify-content: center
  align-items: center
  flex-direction: column
  width: 30rem
  h5
    font-family: "Bad Script", cursive
    color: DarkBlue
    font-size: 2rem

.notes
  background: center url('https://aigis.club/uploads/posts/2022-01/1642155415_51-adonius-club-p-fon-dlya-zametok-53.png')
  background-repeat: no-repeat
  background-size: 100%
  h2
    font-size: 4rem
    transform: rotate(40deg)
    color: DarkBlue
    border: .3rem solid DarkBlue
    padding: 1rem
    position: absolute
</style>
